<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="gridExtra">
<title>Displaying tables as grid graphics • gridExtra</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/JetBrains_Mono-0.4.2/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Displaying tables as grid graphics">
<meta property="og:description" content="gridExtra">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gridExtra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/arrangeGrob.html">Arranging multiple grobs on a page</a>
    <a class="dropdown-item" href="../articles/gtable.html">(Unofficial) overview of gtable</a>
    <a class="dropdown-item" href="../articles/ngonGrob.html">Regular polygons and ellipses in grid graphics</a>
    <a class="dropdown-item" href="../articles/tableGrob.html">Displaying tables as grid graphics</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Displaying tables as grid graphics</h1>
                        <h4 data-toc-skip class="author">Baptiste
Auguie</h4>
            
            <h4 data-toc-skip class="date">2022-12-11</h4>
      
      
      <div class="d-none name"><code>tableGrob.rmd</code></div>
    </div>

    
    
<p>Tabular data is usually formatted outside the graphics device, e.g
via LaTeX, or html tables. However, in some cases it may be convenient
to display <em>small</em> tables alongside graphics. A couple of
packages offer this possibility with base graphics (<code>plotrix</code>
for instance); the <code>gridExtra</code> provides the pair of
<code>tableGrob/grid.table</code> functions for this purpose.</p>
<p><em>Note:</em> This vignette uses the development version of
<code>gridExtra</code>, some features may not be yet available in the
released version.</p>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">grid.table</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/basic-1.png" width="384"></p>
</div>
<div class="section level2">
<h2 id="spacing">Spacing<a class="anchor" aria-label="anchor" href="#spacing"></a>
</h2>
<p>The spacing of each row/column is automatic, and will adjust to
bigger cell contents. Plotmath notation may be used, with the
<code>parse=TRUE</code> argument. Note that this is applied to
individual strings of text, and reverts to standard text if parsing
fails (this is useful when mixing multiline text with plotmath in
different cells).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"this is very wwwwwide"</span></span>
<span><span class="va">d</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"this\nis\ntall"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"alpha*integral(xdx,a,infinity)"</span>,</span>
<span>                 <span class="st">"this text\nis high"</span>, <span class="st">'alpha/beta'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span>colhead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>parse<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">grid.table</a></span><span class="op">(</span><span class="va">d</span>, theme<span class="op">=</span><span class="va">tt</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/annotations-1.png" width="384"></p>
</div>
<div class="section level2">
<h2 id="aesthetic-formatting">Aesthetic formatting<a class="anchor" aria-label="anchor" href="#aesthetic-formatting"></a>
</h2>
<p>The formatting is controlled by <em>themes</em>, which are nested
lists of graphical parameters. See <code>ttheme_default</code> and
<code>ttheme_minimal</code> for two built-in examples. Changing a few
parameters at a time amounts to modifying the list with the new
values.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">tt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">tt3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_minimal</a></span><span class="op">(</span></span>
<span>  core<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bg_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">blues9</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, col<span class="op">=</span><span class="cn">NA</span><span class="op">)</span>,</span>
<span>            fg_params<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fontface<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  colhead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col<span class="op">=</span><span class="st">"navyblue"</span>, fontface<span class="op">=</span><span class="fl">4L</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  rowhead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col<span class="op">=</span><span class="st">"orange"</span>, fontface<span class="op">=</span><span class="fl">3L</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, theme<span class="op">=</span><span class="va">tt1</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, theme<span class="op">=</span><span class="va">tt2</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, theme<span class="op">=</span><span class="va">tt3</span><span class="op">)</span>,</span>
<span>  nrow<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/theme-1.png" width="768"></p>
<p>If the formatting values are fewer than the number of cells, they are
recycled along columns,</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span>core<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        fg_params<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fontface<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"plain"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"bold.italic"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        bg_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey95"</span>, <span class="st">"grey90"</span><span class="op">)</span>,</span>
<span>                                    length.out<span class="op">=</span><span class="fl">4</span><span class="op">)</span>, <span class="st">"#6BAED6"</span><span class="op">)</span>,</span>
<span>                         alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0.5</span><span class="op">)</span>, each<span class="op">=</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">grid.table</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, theme <span class="op">=</span> <span class="va">t1</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/recycling-1.png" width="384"></p>
</div>
<div class="section level2">
<h2 id="text-justification">Text justification<a class="anchor" aria-label="anchor" href="#text-justification"></a>
</h2>
<p>The text labels can be justified; the default is “centre” for the
core and header, and “right” for the row names. These settings can be
adjusted by passing the relevant parameters of <code>textGrob</code> via
the theme nested lists,</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">tt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span>core<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hjust<span class="op">=</span><span class="fl">1</span>, x<span class="op">=</span><span class="fl">0.9</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      rowhead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hjust<span class="op">=</span><span class="fl">1</span>, x<span class="op">=</span><span class="fl">0.95</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tt3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span>core<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hjust<span class="op">=</span><span class="fl">0</span>, x<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      rowhead<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hjust<span class="op">=</span><span class="fl">0</span>, x<span class="op">=</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, theme<span class="op">=</span><span class="va">tt1</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, theme<span class="op">=</span><span class="va">tt2</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, theme<span class="op">=</span><span class="va">tt3</span><span class="op">)</span>,</span>
<span>  nrow<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/justify-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="further-gtable-processing-and-integration">Further gtable processing and integration<a class="anchor" aria-label="anchor" href="#further-gtable-processing-and-integration"></a>
</h2>
<p>Being based on <code>gtable</code>, the table can be further
processed. In particular, we may edit the cell sizes to align with other
content on the page.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, cols <span class="op">=</span> <span class="cn">NULL</span>, rows<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">g2</span><span class="op">$</span><span class="va">widths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">g2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">g2</span><span class="op">)</span><span class="op">)</span>, <span class="st">"npc"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html" class="external-link">rectGrob</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html" class="external-link">rectGrob</a></span><span class="op">(</span><span class="op">)</span>, nrow<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">g</span>, <span class="va">g2</span>, nrow<span class="op">=</span><span class="fl">1</span>, newpage <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/sizes-1.png" width="768"></p>
<p>The alignment of several tables can be achieved with the
<code>combine</code> function (adapted from
<code>gtable:::join</code>),</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d1</span> <span class="op">&lt;-</span> <span class="va">PlantGrowth</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">1</span>, drop<span class="op">=</span><span class="cn">FALSE</span><span class="op">]</span></span>
<span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="va">PlantGrowth</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="va">g1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">d1</span><span class="op">)</span></span>
<span><span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">d2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">haligned</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/combine.html">gtable_combine</a></span><span class="op">(</span><span class="va">g1</span>,<span class="va">g2</span>, along<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">valigned</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/combine.html">gtable_combine</a></span><span class="op">(</span><span class="va">g1</span>,<span class="va">g2</span>, along<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html" class="external-link">grid.newpage</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">haligned</span>, <span class="va">valigned</span>, ncol<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/align-1.png" width="576"></p>
<div class="section level3">
<h3 id="borders-and-separators">Borders and separators<a class="anchor" aria-label="anchor" href="#borders-and-separators"></a>
</h3>
<p>Other grobs such as separating lines and rectangles (borders, boxes)
may be added. In this case, keep in mind that row, column and cell
numbering includes the column of row labels and the row of column labels
<em>if they are present.</em> Let us illustrate this by adding some
borders (using <code>rectGrob</code>) to a simple table without row
numbers. We’ll add two actually, to give a nice effect of a heavy line
under the row of column headers.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gtable.r-lib.org" class="external-link">gtable</a></span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, rows <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gtable.r-lib.org/reference/gtable_add_grob.html" class="external-link">gtable_add_grob</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>        grobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html" class="external-link">rectGrob</a></span><span class="op">(</span>gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        t <span class="op">=</span> <span class="fl">2</span>, b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>, l <span class="op">=</span> <span class="fl">1</span>, r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gtable.r-lib.org/reference/gtable_add_grob.html" class="external-link">gtable_add_grob</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>        grobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html" class="external-link">rectGrob</a></span><span class="op">(</span>gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        t <span class="op">=</span> <span class="fl">1</span>, l <span class="op">=</span> <span class="fl">1</span>, r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/numberingDemo1-1.png" width="384"></p>
<p>Note that when using <code>rectGrob</code> the top, bottom, left and
right arguments (<code>t, b, l, r</code>) are the rows and columns which
will be <em>inside</em> the rectangle. If we repeat the above code
almost exactly, but don’t suppress the column of row labels, we see that
column 1 is now the column of row labels (and it doesn’t look that good
either, but that’s not our point).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gtable.r-lib.org/reference/gtable_add_grob.html" class="external-link">gtable_add_grob</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>        grobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html" class="external-link">rectGrob</a></span><span class="op">(</span>gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        t <span class="op">=</span> <span class="fl">2</span>, b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>, l <span class="op">=</span> <span class="fl">1</span>, r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gtable.r-lib.org/reference/gtable_add_grob.html" class="external-link">gtable_add_grob</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>        grobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html" class="external-link">rectGrob</a></span><span class="op">(</span>gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        t <span class="op">=</span> <span class="fl">1</span>, l <span class="op">=</span> <span class="fl">1</span>, r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/numberingDemo2-1.png" width="384"></p>
<p>When adding line segments to separate rows and columns using
<code>segmentsGrob</code>, the row and column numbering scheme is the
same (it includes any row or column labels). When working with line
segments, you should keep in mind the default coordinate values for
<code>segmentsGrob</code>. They are x0 = 0, y0 = 0, x1 = 1, y1 = 1, all
in npc, relative to the cell(s) you are modifying, with the lower left
corner being 0,0. For clarity, we show all the arguments in these
examples. With this in mind, to add a line across the bottom of a single
cell, use:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gtable.r-lib.org/reference/gtable_add_grob.html" class="external-link">gtable_add_grob</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>        grobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.segments.html" class="external-link">segmentsGrob</a></span><span class="op">(</span> <span class="co"># line across the bottom</span></span>
<span>            x0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>            y0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>            x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>            y1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>            gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        t <span class="op">=</span> <span class="fl">3</span>, b <span class="op">=</span> <span class="fl">3</span>, l <span class="op">=</span> <span class="fl">3</span>, r <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/segments1-1.png" width="384"></p>
<p>and to add a line to the left side:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gtable.r-lib.org/reference/gtable_add_grob.html" class="external-link">gtable_add_grob</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>        grobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.segments.html" class="external-link">segmentsGrob</a></span><span class="op">(</span> <span class="co"># line across the bottom</span></span>
<span>      x0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>            y0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>            x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>            y1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>            gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        t <span class="op">=</span> <span class="fl">3</span>, b <span class="op">=</span> <span class="fl">3</span>, l <span class="op">=</span> <span class="fl">3</span>, r <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/segments2-1.png" width="384"></p>
<p>Perhaps you’d like to cross out a cell. This can be done with two
diagonal lines combined via a <code>grobTree</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://gtable.r-lib.org/reference/gtable_add_grob.html" class="external-link">gtable_add_grob</a></span><span class="op">(</span><span class="va">g</span>,</span>
<span>        grobs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.grob.html" class="external-link">grobTree</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/grid/grid.segments.html" class="external-link">segmentsGrob</a></span><span class="op">(</span> <span class="co"># diagonal line ul -&gt; lr</span></span>
<span>                x0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                y0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                y1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/r/grid/grid.segments.html" class="external-link">segmentsGrob</a></span><span class="op">(</span> <span class="co"># diagonal line ll -&gt; ur</span></span>
<span>                x0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                y0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                y1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>,<span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        t <span class="op">=</span> <span class="fl">3</span>, b <span class="op">=</span> <span class="fl">3</span>, l <span class="op">=</span> <span class="fl">3</span>, r <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/segments3-1.png" width="384"></p>
<p>If you have many cells to decorate you can use <code>replicate</code>
to create create the segments. Just keep the <code>tableGrob</code>
numbering scheme in mind.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>, theme <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">separators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span>,</span>
<span>                     <span class="fu"><a href="https://rdrr.io/r/grid/grid.segments.html" class="external-link">segmentsGrob</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>, <span class="st">"npc"</span><span class="op">)</span>, gp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>lty<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                     simplify<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">## add vertical lines on the left side of columns (after 2nd)</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">gtable</span><span class="fu">::</span><span class="fu"><a href="https://gtable.r-lib.org/reference/gtable_add_grob.html" class="external-link">gtable_add_grob</a></span><span class="op">(</span><span class="va">g</span>, grobs <span class="op">=</span> <span class="va">separators</span>,</span>
<span>                     t <span class="op">=</span> <span class="fl">2</span>, b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>, l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">+</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/separators-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="accessing-existing-grobs-in-the-table">Accessing existing grobs in the table<a class="anchor" aria-label="anchor" href="#accessing-existing-grobs-in-the-table"></a>
</h3>
<p>We may also access and modify the original content of individual
cells, e.g. to highlight a value.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tableGrob.html">tableGrob</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">find_cell</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">table</span>, <span class="va">row</span>, <span class="va">col</span>, <span class="va">name</span><span class="op">=</span><span class="st">"core-fg"</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">l</span> <span class="op">&lt;-</span> <span class="va">table</span><span class="op">$</span><span class="va">layout</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">l</span><span class="op">$</span><span class="va">t</span><span class="op">==</span><span class="va">row</span> <span class="op">&amp;</span> <span class="va">l</span><span class="op">$</span><span class="va">l</span><span class="op">==</span><span class="va">col</span> <span class="op">&amp;</span> <span class="va">l</span><span class="op">$</span><span class="va">name</span><span class="op">==</span><span class="va">name</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ind</span> <span class="op">&lt;-</span> <span class="fu">find_cell</span><span class="op">(</span><span class="va">g</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="st">"core-fg"</span><span class="op">)</span></span>
<span><span class="va">ind2</span> <span class="op">&lt;-</span> <span class="fu">find_cell</span><span class="op">(</span><span class="va">g</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="st">"core-bg"</span><span class="op">)</span></span>
<span><span class="va">g</span><span class="op">$</span><span class="va">grobs</span><span class="op">[</span><span class="va">ind</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"gp"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fontsize<span class="op">=</span><span class="fl">15</span>, fontface<span class="op">=</span><span class="st">"bold"</span><span class="op">)</span></span>
<span><span class="va">g</span><span class="op">$</span><span class="va">grobs</span><span class="op">[</span><span class="va">ind2</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"gp"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fill<span class="op">=</span><span class="st">"darkolivegreen1"</span>, col <span class="op">=</span> <span class="st">"darkolivegreen4"</span>, lwd<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/highlight-1.png" width="384"></p>
</div>
</div>
<div class="section level2">
<h2 id="faster-tables-an-alternative-grid-function">Faster tables: an alternative grid function<a class="anchor" aria-label="anchor" href="#faster-tables-an-alternative-grid-function"></a>
</h2>
<p>The <code>tableGrob</code> function can be very slow; unfortunately
this is the price to pay for its versatility and easier implementation.
We use individual <code>textGrob</code> and <code>rectGrob</code>
elements for each cell, instead of relying on the vectorised
implementation of these functions. The reason is practical: it is much
easier to place, measure, and customise individual grobs, than modify
the graphical parameters and positions of a single vectorised grob. An
alternative function is presented below, using this vectorised approach,
but lacking many of the customisations of <code>tableGrob</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid.ftable</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">d</span>, <span class="va">padding</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">4</span>, <span class="st">"mm"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span>  <span class="va">nr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## character table with added row and column names</span></span>
<span>  <span class="va">extended_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                           <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>,</span>
<span>                                 <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## string width and height</span></span>
<span>  <span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">extended_matrix</span>, <span class="fl">2</span>, <span class="va">strwidth</span>, <span class="st">"inch"</span><span class="op">)</span></span>
<span>  <span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">extended_matrix</span>, <span class="fl">2</span>, <span class="va">strheight</span>, <span class="st">"inch"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">widths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">w</span>, <span class="fl">2</span>, <span class="va">max</span><span class="op">)</span></span>
<span>  <span class="va">heights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">h</span>, <span class="fl">1</span>, <span class="va">max</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">padding</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.convert.html" class="external-link">convertUnit</a></span><span class="op">(</span><span class="va">padding</span>, unitTo <span class="op">=</span> <span class="st">"in"</span>, valueOnly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">widths</span> <span class="op">+</span> <span class="va">padding</span><span class="op">)</span> <span class="op">-</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="va">padding</span></span>
<span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">heights</span> <span class="op">+</span> <span class="va">padding</span><span class="op">)</span> <span class="op">-</span> <span class="va">padding</span></span>
<span></span>
<span>  <span class="va">rg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html" class="external-link">rectGrob</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="va">widths</span><span class="op">/</span><span class="fl">2</span>, <span class="st">"in"</span><span class="op">)</span>,</span>
<span>                 y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"npc"</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">y</span>, each <span class="op">=</span> <span class="va">nc</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>, <span class="st">"in"</span><span class="op">)</span>,</span>
<span>                 width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="va">widths</span> <span class="op">+</span> <span class="va">padding</span>, <span class="st">"in"</span><span class="op">)</span>,</span>
<span>                 height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="va">heights</span> <span class="op">+</span> <span class="va">padding</span>, <span class="st">"in"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">tg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.text.html" class="external-link">textGrob</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">extended_matrix</span><span class="op">)</span><span class="op">)</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="va">widths</span><span class="op">/</span><span class="fl">2</span>, <span class="st">"in"</span><span class="op">)</span>,</span>
<span>                 y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"npc"</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">y</span>, each <span class="op">=</span> <span class="va">nc</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>, <span class="st">"in"</span><span class="op">)</span>,</span>
<span>                 just <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.grob.html" class="external-link">gTree</a></span><span class="op">(</span>children <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.grob.html" class="external-link">gList</a></span><span class="op">(</span><span class="va">rg</span>, <span class="va">tg</span><span class="op">)</span>, <span class="va">...</span>,</span>
<span>             x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, widths <span class="op">=</span> <span class="va">widths</span>, heights <span class="op">=</span> <span class="va">heights</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html" class="external-link">grid.newpage</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">grid.ftable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fl">4</span><span class="op">)</span>, gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grey90"</span>, <span class="st">"grey95"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="tableGrob_files/figure-html/ftable-1.png" width="576"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Baptiste Auguie.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
